<div class="container-fluid" ng-controller="BuildDefinitionController">
    <div id="Loading" ng-if="!IsLoaded">
        <div class="loader"></div>
    </div>
    <div class="row" ng-if="IsLoaded">
        <table ng-table="tableParams" class="table table-condensed" id="buildsTable" show-filter="true">
            <thead>
            <tr>
                <th style="width: 225px">
                    <button ng-click="toggle()" type="button" class="btn btn-default" ng-disabled="IsLaunching">Toggle</button>
                    <button ng-click="queueDefinitions()" class="btn btn-success" id="launch" ng-disabled="noneChecked() || IsLaunching">Launch Selected</button>
                </th>
                <th>Repository Name</th>
                <th>Build Definition Name</th>
                <th>Default Branch</th>
                <th>Latest Build Status</th>
                <th>Average Run Time</th>
            </tr>
            </thead>
            <tr ng-repeat="definition in $data">
                <td title="''" ng-class="{buildStarted: definition.launched}" style="text-align: center"><input type="checkbox" name="definitionIds" value="{{definition.id}}" ng-checked="isSelected(definition)" ng-click="select(definition)" ng-disabled="IsLaunching" ng-if="!definition.launched"/><span ng-if="definition.launched">Launched</span></td>
                <td title="'Project Name'" sortable="'project.name'" filter="{project : 'text'}" ng-class="{buildStarted: definition.launched}">{{definition.project.name}}</td>
                <td title="'Definition Name'" sortable="'definition.name'" filter="{definition: 'text'}" ng-class="{buildStarted: definition.launched}">{{definition.name}}</td>
                <td title="'Default Branch'" ng-class="{buildStarted: definition.launched}">{{definition.defaultBranch | buildDefaultBranch}}</td>
                <td title="'Latest Build Status'" ng-bind-html="definition.latestBuilds | latestBuildStatus" ng-class="{buildStarted: definition.launched}"></td>
                <td title="'Average Run Time'" style="padding: 1px;vertical-align:bottom">
                    <svg class="chart" width="130" height="20" role="img">
                        <a href="{{build._links.web.href}}" target="_blank" ng-repeat="build in definition.latestBuilds">
                            <g ng:attr:class="bar {{build.result}}" >
                                <title>{{build.result}}{{convertRunTime(getRunTime(build))}}</title>
                                <rect width="12" ng:attr:height="{{getHeight(definition.latestBuilds, build)}}" ng:attr:x="{{$index * 13}}" ng:attr:y="{{20 - getHeight(definition.latestBuilds, build)}}"></rect>
                            </g>
                        </a>
                    </svg>
                </td>
            </tr>
        </table>
    </div>
</div>