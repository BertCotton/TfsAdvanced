<div class="container" ng-controller="BuildsController">
    <div id="Loading" ng-if="!IsLoaded">
        <div class="loader"></div>
    </div>
    <div class="row" ng-if="IsLoaded">
        <table ng-table="tableParams" class="table table-striped table-bordered table-condensed" id="buildsTable" show-filter="true" show-group="false">
            <tr class="ng-table-group" ng-repeat-start="buildDefinition in $groups" ng-init="groupState(buildDefinition)">
                <td colspan="{{$columns.length}}">
                    <a href="" ng-click="toggleGroup(buildDefinition)">
                        <span class="glyphicon" ng-class="{ 'glyphicon-chevron-right': buildDefinition.$hideRows, 'glyphicon-chevron-down': !buildDefinition.$hideRows }"></span>
                        <strong>{{ buildDefinition.value }}</strong>
                        <span class="pull-right" style="width:200px" ng-bind-html="getLatestBuild(buildDefinition) | buildResult"></span>
                        <span class="pull-right" style="margin-right:20px">{{getLatestBuild(buildDefinition).lastChangedDate | date : "MM/dd/yyyy 'at' h:mm a"}}</span>
                    </a>
            </tr>
            <tr ng-hide="buildDefinition.$hideRows" ng-repeat="build in buildDefinition.data" ng-repeat-end>
                <td title="'Build ID'" sortable="'id'"><a href="{{build.buildUrl}}" target="_blank">{{build.id}}</a></td>
                <td title="'Project Name'" sortable="'project.name'" filter="{project : 'text'}">{{build.project.name}}</td>
                <td title="'Definition Name'" sortable="'definition.name'" filter="{definition: 'text'}">{{build.definition.name}}</td>
                <td title="'Last Change'" sortable="'lastChangedDate'">{{build.lastChangedDate | date : "MM/dd/yyyy 'at' h:mm a" }}</td>
                <td title="'Build Result'" ng-bind-html="build | buildResult"></td>
                <td title="'Build Status'" ng-bind-html="build.status | buildStatus"></td>
            </tr>
        </table>
    </div>
</div>